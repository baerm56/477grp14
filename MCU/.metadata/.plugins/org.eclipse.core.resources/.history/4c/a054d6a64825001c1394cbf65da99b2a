#include "speaker.h"


void SpeakerInit(DAC_HandleTypeDef * DAC_Config){
	GPIO_InitTypeDef GPIO_InitStruct;
	DAC_ChannelConfTypeDef sConfig = {0};

	// Enable Analog Output Pin PA5
	__HAL_RCC_GPIOA_CLK_ENABLE();
	GPIO_InitStruct.Pin = GPIO_PIN_4;
	GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
	GPIO_InitStruct.Pull = GPIO_NOPULL;
	HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

	// Enable DAC clock
	__HAL_RCC_DAC_CLK_ENABLE();
	DAC_Config->Instance = DAC;
	HAL_DAC_Init(DAC_Config);

	// DAC Setup Settings of Timer 2 Trigger
	sConfig.DAC_Trigger = DAC_TRIGGER_T2_TRGO;
	sConfig.DAC_OutputBuffer = DAC_OUTPUTBUFFER_ENABLE;
	HAL_DAC_ConfigChannel(DAC_Config, &sConfig, DAC_CHANNEL_1);
}

